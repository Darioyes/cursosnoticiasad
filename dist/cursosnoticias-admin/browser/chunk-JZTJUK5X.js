import{a as G}from"./chunk-JLOE5V2W.js";import{a as $}from"./chunk-2LSXDOOM.js";import{a as I}from"./chunk-S3PDG7CB.js";import{a as A}from"./chunk-2PPVBH7W.js";import"./chunk-SVQ25E35.js";import{a as M,b as l,c as N,d as O,e as S,g as F,h as P,i as E,j as k,k as T,l as j,m as D,n as z}from"./chunk-CIC5IFOZ.js";import{a as V}from"./chunk-P3L3KALH.js";import"./chunk-T23ZY6V2.js";import"./chunk-IXWLID5M.js";import"./chunk-TGWLULYN.js";import{Ca as m,W as g,Xa as u,_ as C,ab as f,bb as _,cb as t,db as e,eb as w,ga as x,lb as p,mb as y,pa as v,rb as i,sb as h,wb as b}from"./chunk-6LMFFRUR.js";function q(a,s){return this.categoriesNews.id}function B(a,s){return this.categoriesCourse.id}function U(a,s){if(a&1&&(t(0,"option",25),i(1),e()),a&2){let c=s.$implicit;u("value",c.id),m(),h(c.name)}}function R(a,s){if(a&1&&(t(0,"option",28),i(1),e()),a&2){let c=s.$implicit,n=y();u("value",c.id)("selected",c.id===(n.news==null||n.news.data==null||n.news.data.category_course==null?null:n.news.data.category_course.id)),m(),h(c.name)}}var se=(()=>{let s=class s{constructor(){this.newService=g(V),this.formbuilder=g(D),this.categoriesNewsService=g(G),this.categoriesCoursesService=g($),this.newsForm=new S({}),this.openModalNews=new v}ngOnInit(){this.newsNew(),this.getCategoriesNews(),this.getCategoriesCourses()}ngOnChanges(n){this.getOneNews(this.idNews)}newsNew(){this.newsForm=this.formbuilder.group({title:["",l.compose([l.required,l.maxLength(255),l.minLength(5)])],epigraph:["",l.compose([l.required,l.maxLength(500),l.minLength(5)])],content:["",l.compose([l.required])],visible:[""],featured:[""],category_news_id:[""],category_course_id:[""],image:[""]})}get title(){return this.newsForm.get("title")}get epigraph(){return this.newsForm.get("epigraph")}get content(){return this.newsForm.get("content")}get visible(){return this.newsForm.get("visible")}get featured(){return this.newsForm.get("featured")}get category_news_id(){return this.newsForm.get("category_news_id")}get category_course_id(){return this.newsForm.get("category_course_id")}get image(){return this.newsForm.get("image")}newsModify(n){if(this.newsForm.valid){let o=new FormData;o.append("title",this.newsForm.get("title").value),o.append("epigraph",this.newsForm.get("epigraph").value),o.append("content",this.newsForm.get("content").value),o.append("visible",this.newsForm.get("visible").value),o.append("featured",this.newsForm.get("featured").value),o.append("category_news_id",this.newsForm.get("category_news_id").value),o.append("category_course_id",this.newsForm.get("category_course_id").value),o.append("image",this.newsForm.get("image").value),confirm("\xBFEstas seguro de modificar esta noticia?")&&this.newService.modifyNews(o,n).subscribe({next:d=>{this.newService.setModalActive(!1),this.openModalNews.emit(!1),this.newsForm.reset()},error:d=>{console.log(d)},complete:()=>{console.log("complete")}})}else console.log("Todos los campos son obligatorios")}getOneNews(n){if(n){let o=A.apiUrlBase;this.newService.getnews(this.idNews).subscribe({next:r=>{this.news=r,this.images=o+r?.data.image?.replace("public","storage")},error:r=>{console.log(r),this.errorNews=r.message.message},complete:()=>{console.log("complete")}}),setTimeout(()=>{this.newsForm.setValue({title:this.news?.data?.title?this.news?.data?.title:"",epigraph:this.news?.data?.epigraph?this.news?.data?.epigraph:"",content:this.news?.data?.content?this.news?.data?.content:"",visible:this.news?.data?.visible?this.news?.data?.visible:"",featured:this.news?.data?.featured?this.news?.data?.featured:"",category_news_id:this.news?.data?.category_news?.id?this.news?.data?.category_news?.id:"",category_course_id:this.news?.data?.category_course?.id?this.news?.data?.category_course?.id:"",image:""})},2e3)}}onFileChangeForm(n){let o=n.target.files[0];this.newsForm.patchValue({image:o}),this.newsForm.get("image").updateValueAndValidity(),n.target.value=""}getCategoriesNews(){this.categoriesNewsService.getCategoriesNews().subscribe({next:n=>{this.categoriesNews=n.data.data},error:n=>{console.log(n)},complete:()=>{console.log("complete")}})}getCategoriesCourses(){this.categoriesCoursesService.getCategoriesNews().subscribe({next:n=>{this.categoriesCourse=n.data.data,this.existCategories=n.error},error:n=>{console.log(n)},complete:()=>{console.log("complete")}})}closeModalNews(){this.openModalNews.emit(!1),this.newsForm.reset()}};s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=C({type:s,selectors:[["app-modify-news"]],inputs:{idNews:"idNews"},outputs:{openModalNews:"openModalNews"},standalone:!0,features:[x,b],decls:65,vars:1,consts:[[1,"conteiner-news-one"],[1,"conteiner-news-one__close"],[1,"fa-solid","fa-x",3,"click"],[1,"conteiner-news-one__title"],["title","Crear nueva noticia"],["enctype","multipart/form-data",3,"formGroup"],[1,"conteiner-news-one__description"],[1,"conteiner-news-one__description--label"],["for","title"],["name","title","id","title","formControlName","title"],["for","epigraph"],["name","epigraph","id","epigraph","formControlName","epigraph"],["for","content"],["name","content","id","content","formControlName","content"],["value","news"],["value","course"],["for","visible"],["name","visible","id","visible","formControlName","visible"],["value","1"],["value","0"],["for","featured"],["name","featured","id","featured","formControlName","featured"],["for","category_news_id"],["name","category_news_id","id","category_news_id","formControlName","category_news_id"],["value",""],[3,"value"],["for","category_course_id"],["name","category_course_id","id","category_course_id","formControlName","category_course_id"],[3,"value","selected"],[1,"conteiner-news-one__image"],["for","image"],["type","file","name","image","formControlName","image",3,"change"],[1,"conteiner-news-one__btn"],[1,"btn","btn-warning",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(o,r){o&1&&(t(0,"section",0)(1,"div",1)(2,"a")(3,"i",2),p("click",function(){return r.closeModalNews()}),e()()(),t(4,"div",3),w(5,"app-title",4),e(),t(6,"form",5)(7,"div",6)(8,"div",7)(9,"label",8),i(10,"T\xEDtulo"),e(),w(11,"textarea",9),e(),t(12,"div",7)(13,"label",10),i(14,"Ep\xEDgrafe"),e(),w(15,"textarea",11),e(),t(16,"div",7)(17,"label",12),i(18,"Contenido"),e(),t(19,"select",13)(20,"option",14),i(21,"Noticia"),e(),t(22,"option",15),i(23,"Curso"),e()()(),t(24,"div",7)(25,"label",16),i(26,"visible"),e(),t(27,"select",17)(28,"option",18),i(29,"Si"),e(),t(30,"option",19),i(31,"No"),e()()(),t(32,"div",7)(33,"label",20),i(34,"Principal"),e(),t(35,"select",21)(36,"option",18),i(37,"Si"),e(),t(38,"option",19),i(39,"No"),e()()(),t(40,"div",7)(41,"label",22),i(42,"Categor\xEDa noticia"),e(),t(43,"select",23)(44,"option",24),i(45,"No Aplica"),e(),f(46,U,2,2,"option",25,q,!0),e()(),t(48,"div",7)(49,"label",26),i(50,"Categor\xEDa cursos"),e(),t(51,"select",27)(52,"option",24),i(53,"No Aplica"),e(),f(54,R,2,3,"option",28,B,!0),e()()(),t(56,"div",29)(57,"label",30),i(58,"Imagen principal"),e(),t(59,"input",31),p("change",function(L){return r.onFileChangeForm(L)}),e()(),t(60,"div",32)(61,"button",33),p("click",function(){return r.newsModify(r.idNews)}),i(62,"Modificar"),e(),t(63,"button",34),p("click",function(){return r.closeModalNews()}),i(64,"Cancelar"),e()()()()),o&2&&(m(6),u("formGroup",r.newsForm),m(40),_(r.categoriesNews),m(8),_(r.categoriesCourse))},dependencies:[I,z,F,T,j,M,k,N,O,P,E],styles:[".conteiner-news-one[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:first baseline;flex-direction:column;overflow-y:scroll}.conteiner-news-one__close[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:flex-end;padding:5px 10px;background:#999}.conteiner-news-one__close[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;justify-content:center;background:#fff;padding:5px;border:1.5px solid #dc3545;color:#dc3545}.conteiner-news-one__close[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#dc3545;color:#fff;cursor:pointer}.conteiner-news-one__title[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center}.conteiner-news-one__form[_ngcontent-%COMP%]{width:100%}.conteiner-news-one__description[_ngcontent-%COMP%]{padding:10px;width:100%;display:grid;grid-template-columns:repeat(2,1fr);grid-gap:.2rem}.conteiner-news-one__description--label[_ngcontent-%COMP%]{min-width:300px;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:10px;border:1px solid #ccc}.conteiner-news-one__description--label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;background:#999;text-align:center;padding:5px;font-size:1.2rem;color:#fff;font-weight:700}.conteiner-news-one__description--label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;padding:5px;font-size:1rem}.conteiner-news-one__description--label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:5px;font-size:1rem;border:none;outline:none}.conteiner-news-one__description--label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:#f0efef}.conteiner-news-one__full[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:10px;border:1px solid #ccc}.conteiner-news-one__full[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;background:#999;text-align:center;padding:5px;font-size:1.2rem;color:#fff;font-weight:700}.conteiner-news-one__full[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;padding:5px;font-size:1rem}.conteiner-news-one__image[_ngcontent-%COMP%]{width:150px}.conteiner-news-one__image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;padding:10px}.conteiner-news-one__btn[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;align-items:center;justify-content:center;gap:10px;padding:10px}.conteiner-news-one[_ngcontent-%COMP%]   .form-articles[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;flex-direction:column}.conteiner-news-one[_ngcontent-%COMP%]   app-form-modify[_ngcontent-%COMP%]{width:100%}form[_ngcontent-%COMP%]{width:100%;height:100%}textarea[_ngcontent-%COMP%]{width:100%;padding:5px;font-size:1rem;border:none;outline:none;resize:none}textarea[_ngcontent-%COMP%]:focus{background:#f0efef}select[_ngcontent-%COMP%]{width:100%;border:none;outline:none;font-size:1.2rem;letter-spacing:1px;color:#222}"]});let a=s;return a})();export{se as ModifyNewsComponent};
