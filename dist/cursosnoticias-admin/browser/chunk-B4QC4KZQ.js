import{a as O}from"./chunk-2PPVBH7W.js";import{a as J}from"./chunk-SVQ25E35.js";import{a as $,b as u,c as B,d as j,e as z,g as q,h as L,i as U,m as R,n as W}from"./chunk-CIC5IFOZ.js";import{a as H}from"./chunk-P3L3KALH.js";import"./chunk-T23ZY6V2.js";import"./chunk-IXWLID5M.js";import{pa as G}from"./chunk-TGWLULYN.js";import{$a as v,Ca as r,Ta as x,Ua as I,Va as k,W as E,Xa as g,_ as F,_a as _,ab as h,bb as b,cb as i,db as n,eb as C,fb as y,ga as T,ha as f,ia as w,lb as p,mb as d,nb as D,pa as P,rb as l,sb as m,tb as A,wb as V,yb as S,za as N,zb as M}from"./chunk-6LMFFRUR.js";var K=(t,a)=>a.id,Q=()=>[import("./chunk-ANOWGRSL.js").then(t=>t.TitleComponent),G,q,$,B,j,L,U,import("./chunk-AJ6EIQYH.js").then(t=>t.FormModifyComponent),import("./chunk-JZTJUK5X.js").then(t=>t.ModifyNewsComponent)];function X(t,a){if(t&1&&(i(0,"p"),l(1),n()),t&2){let e=d(2);r(),m(e.news==null||e.news.data==null||e.news.data.category_news==null?null:e.news.data.category_news.name)}}function Y(t,a){if(t&1&&(i(0,"p"),l(1),n()),t&2){let e=d(2);r(),m(e.news==null||e.news.data==null||e.news.data.category_course==null?null:e.news.data.category_course.name)}}function Z(t,a){if(t&1){let e=y();i(0,"div",6)(1,"h2"),l(2),n()(),i(3,"div",8)(4,"div",9)(5,"label",23),l(6,"Subtitulo"),n(),i(7,"p"),l(8),n()(),i(9,"div",9)(10,"label",24),l(11,"Entrada"),n(),i(12,"p"),l(13),n()()(),i(14,"div",25)(15,"label",26),l(16,"Contenido"),n(),i(17,"p"),l(18),n()(),i(19,"div",15),C(20,"img",16),n(),i(21,"div",17)(22,"button",27),p("click",function(){let o=f(e).$implicit,s=d(4);return w(s.modifyArticleOpen(o.id))}),l(23,"Modificar"),n(),i(24,"button",28),p("click",function(){let o=f(e).$implicit,s=d(4);return w(s.deleteOneArticle(o.id))}),l(25,"Eliminar"),n()()}if(t&2){let e=a.$implicit,c=a.$index,o=d(4);r(2),A("Articulos ",c+1," "),r(6),m(e.subtitle),r(5),m(e.entrance),r(5),m(e.body_news),r(2),D("src",o.UrlImgA+(e==null||e.image==null?null:e.image.replace("public","storage")),N),D("alt",e==null?null:e.subtitle)}}function ee(t,a){t&1&&(i(0,"div",6)(1,"h2"),l(2,"No hay articulos"),n()())}function te(t,a){if(t&1&&h(0,Z,26,6,null,null,K,!1,ee,3,0,"div",6),t&2){let e=d(3);b(e.news==null||e.news.data==null?null:e.news.data.articles)}}function ne(t,a){if(t&1){let e=y();i(0,"app-form-modify",29),p("formModifyClose",function(o){f(e);let s=d(3);return w(s.modifyArticleClose(o))}),n()}if(t&2){let e=d(3);g("idArticle",e.idArticle)}}function ie(t,a){if(t&1){let e=y();x(0,te,3,1)(1,ne,1,1,"app-form-modify",21),i(2,"div",17)(3,"button",22),p("click",function(){f(e);let o=d(2);return w(o.newArticleOpen())}),l(4,"Nuevo articulo"),n()()}if(t&2){let e=d(2);_(e.modifyArticle?1:0),r(3),g("disabled",e.modifyArticle)}}function le(t,a){if(t&1&&(i(0,"p",31),l(1),n()),t&2){let e=d(3);r(),m(e.messageArticleError)}}function oe(t,a){if(t&1&&(i(0,"p",31),l(1),n()),t&2){let e=a.$implicit;r(),m(e)}}function re(t,a){if(t&1&&h(0,oe,2,1,"p",31,v),t&2){let e=d(3);b(e.errorsArticle==null?null:e.errorsArticle.news_id)}}function ae(t,a){t&1&&(i(0,"p",31),l(1,"El subtitulo es obligatorio"),n())}function ce(t,a){if(t&1&&(i(0,"p",31),l(1),n()),t&2){let e=a.$implicit;r(),m(e)}}function se(t,a){if(t&1&&h(0,ce,2,1,"p",31,v),t&2){let e=d(3);b(e.errorsArticle==null?null:e.errorsArticle.subtitle)}}function de(t,a){t&1&&(i(0,"p",31),l(1,"La entrada es requerida"),n())}function me(t,a){if(t&1&&(i(0,"p",31),l(1),n()),t&2){let e=a.$implicit;r(),m(e)}}function _e(t,a){if(t&1&&h(0,me,2,1,"p",31,v),t&2){let e=d(3);b(e.errorsArticle==null?null:e.errorsArticle.entrance)}}function pe(t,a){t&1&&(i(0,"p",31),l(1,"El contenido es requerido"),n())}function ue(t,a){if(t&1&&(i(0,"p",31),l(1),n()),t&2){let e=a.$implicit;r(),m(e)}}function fe(t,a){if(t&1&&h(0,ue,2,1,"p",31,v),t&2){let e=d(3);b(e.errorsArticle==null?null:e.errorsArticle.body_news)}}function we(t,a){if(t&1&&(i(0,"p",31),l(1),n()),t&2){let e=a.$implicit;r(),m(e)}}function xe(t,a){if(t&1&&h(0,we,2,1,"p",31,v),t&2){let e=d(3);b(e.errorsArticle==null?null:e.errorsArticle.image)}}function ge(t,a){if(t&1){let e=y();i(0,"form",30),p("submit",function(){f(e);let o=d(2);return w(o.newArticleSend())}),x(1,le,2,1,"p",31),C(2,"input",32),x(3,re,2,0),i(4,"div",8)(5,"div",9)(6,"label",23),l(7,"Subtitulo"),n(),C(8,"input",33),x(9,ae,2,0,"p",31)(10,se,2,0),n(),i(11,"div",9)(12,"label",24),l(13,"Entrada"),n(),C(14,"input",34),x(15,de,2,0,"p",31)(16,_e,2,0),n()(),i(17,"div",25)(18,"label",26),l(19,"Contenido"),n(),C(20,"textarea",35),x(21,pe,2,0,"p",31)(22,fe,2,0),n(),i(23,"div",9)(24,"input",36),p("change",function(o){f(e);let s=d(2);return w(s.onFileChange(o))}),n(),x(25,xe,2,0),n(),i(26,"div",17)(27,"button",37),l(28,"Guardar"),n(),i(29,"button",28),p("click",function(){f(e);let o=d(2);return w(o.newArticleClose())}),l(30,"Cancelar"),n()()()}if(t&2){let e=d(2);g("formGroup",e.articleForm),r(),_(e.articleForm.valid?1:-1),r(2),_((e.errorsArticle==null||e.errorsArticle.news_id==null?null:e.errorsArticle.news_id.length)>0?3:-1),r(6),_(!(e.subtitle==null||e.subtitle.errors==null)&&e.subtitle.errors.required&&(e.subtitle!=null&&e.subtitle.touched)?9:-1),r(),_((e.errorsArticle==null||e.errorsArticle.subtitle==null?null:e.errorsArticle.subtitle.length)>0?10:-1),r(5),_(!(e.entrance==null||e.entrance.errors==null)&&e.entrance.errors.required&&(e.entrance!=null&&e.entrance.touched)?15:-1),r(),_((e.errorsArticle==null||e.errorsArticle.entrance==null?null:e.errorsArticle.entrance.length)>0?16:-1),r(5),_(!(e.body_news==null||e.body_news.errors==null)&&e.body_news.errors.required&&(e.body_news!=null&&e.body_news.touched)?21:-1),r(),_((e.errorsArticle==null||e.errorsArticle.body_news==null?null:e.errorsArticle.body_news.length)>0?22:-1),r(3),_((e.errorsArticle==null||e.errorsArticle.image==null?null:e.errorsArticle.image.length)>0?25:-1),r(2),g("disabled",e.articleForm.invalid)}}function Ce(t,a){if(t&1){let e=y();i(0,"div",6)(1,"h2"),l(2),n()(),i(3,"div",25)(4,"label",38),l(5,"Comentario"),n(),i(6,"p"),l(7),n()(),i(8,"div",17)(9,"button",39),l(10,"Modificar"),n(),i(11,"button",19),p("click",function(){let o=f(e).$implicit,s=d(3);return w(s.deleteComment(o.id))}),l(12,"Eliminar"),n()()}if(t&2){let e=a.$implicit,c=a.$index,o=d(3);r(2),A("Comentario ",c+1,""),r(5),m(e.comment),r(2),g("disabled",o.modifyArticle),r(2),g("disabled",o.modifyArticle)}}function he(t,a){if(t&1&&h(0,Ce,13,4,null,null,K),t&2){let e=d(2);b(e.news==null||e.news.data==null?null:e.news.data.comments)}}function be(t,a){if(t&1){let e=y();i(0,"dialog",4)(1,"app-modify-news",5),p("openModalNews",function(o){f(e);let s=d();return w(s.closeModalNews(o))}),n()(),i(2,"div",6),C(3,"app-title",7),n(),i(4,"div",8)(5,"div",9)(6,"label",10),l(7,"T\xEDtulo"),n(),i(8,"p"),l(9),n()(),i(10,"div",9)(11,"label",11),l(12,"Ep\xEDgrafe"),n(),i(13,"p"),l(14),n()(),i(15,"div",9)(16,"label",12),l(17,"Contenido"),n(),i(18,"p"),l(19),n()(),i(20,"div",9)(21,"label",13),l(22,"visible"),n(),i(23,"p"),l(24),n()(),i(25,"div",9)(26,"label",14),l(27,"Principal"),n(),i(28,"p"),l(29),n()(),i(30,"div",9)(31,"label",14),l(32,"Categor\xEDa"),n(),x(33,X,2,1,"p")(34,Y,2,1,"p"),n(),i(35,"div",9)(36,"label",14),l(37,"Fecha de creaci\xF3n"),n(),i(38,"p"),l(39),S(40,"date"),n()(),i(41,"div",9)(42,"label",14),l(43,"Fecha modificaci\xF3n"),n(),i(44,"p"),l(45),S(46,"date"),n()()(),i(47,"div",15),C(48,"img",16),n(),i(49,"div",17)(50,"button",18),p("click",function(){f(e);let o=d();return w(o.openModalNewsModify())}),l(51,"Modificar"),n(),i(52,"button",19),p("click",function(){f(e);let o=d();return w(o.deleteOneNews(o.news==null||o.news.data==null?null:o.news.data.id))}),l(53,"Eliminar"),n()(),x(54,ie,5,2,"div",17)(55,ge,31,11,"form",20)(56,he,2,0)}if(t&2){let e=d();g("open",e.openModalModify),r(),g("idNews",e.newsId),r(2),g("title",e.news==null?null:e.news.message),r(6),m(e.news==null||e.news.data==null?null:e.news.data.title),r(5),m(e.news==null||e.news.data==null?null:e.news.data.epigraph),r(5),m(e.news==null||e.news.data==null?null:e.news.data.content),r(5),m((e.news==null||e.news.data==null?null:e.news.data.visible)===1?"Si":"No"),r(5),m((e.news==null||e.news.data==null?null:e.news.data.featured)===1?"Si":"No"),r(4),_((e.news==null||e.news.data==null?null:e.news.data.category_course)===null?33:34),r(6),m(M(40,18,e.news==null||e.news.data==null?null:e.news.data.created_at,"dd/MM/yyyy")),r(6),m(M(46,21,e.news==null||e.news.data==null?null:e.news.data.updated_at,"dd/MM/yyyy")),r(3),D("src",e.images,N),D("alt",e.news==null||e.news.data==null?null:e.news.data.title),r(2),g("disabled",e.modifyArticle),r(2),g("disabled",e.modifyArticle),r(2),_((e.news==null||e.news.data==null?null:e.news.data.articles.length)>=0?54:-1),r(),_(e.newArticle?55:-1),r(),_((e.news==null||e.news.data==null?null:e.news.data.comments.length)>=0?56:-1)}}function ye(t,a){t&1&&(i(0,"p",31),l(1,"Error en la petici\xF3n"),n())}function ve(t,a){t&1&&C(0,"app-loading",40)}function De(t,a){if(t&1&&x(0,ye,2,0,"p",31)(1,ve,1,0,"app-loading",40),t&2){let e=d();_(e.errorNews?0:1)}}var $e=(()=>{let a=class a{constructor(){this.newService=E(H),this.formbuilder=E(R),this.UrlImgA=O.apiUrlBase,this.newArticle=!1,this.articleForm=new z({}),this.messageArticleError="",this.errorsArticle=[],this.modifyArticle=!1,this.openModalModify=!1,this.activeGet=!1,this.modalClose=new P}ngOnInit(){this.articleFormNew()}ngOnChanges(c){this.getOneNews(this.activeGet)}articleFormNew(){this.articleForm=this.formbuilder.group({news_id:"",subtitle:["",u.compose([u.required,u.maxLength(255),u.minLength(5)])],entrance:["",u.compose([u.required,u.maxLength(1e3),u.minLength(5)])],body_news:["",u.compose([u.required,u.maxLength(1e4),u.minLength(5)])],image:[""]})}get news_id(){return this.articleForm.get("news_id")}get subtitle(){return this.articleForm.get("subtitle")}get entrance(){return this.articleForm.get("entrance")}get body_news(){return this.articleForm.get("body_news")}get image(){return this.articleForm.get("image")}closeModal(){this.modalClose.emit(!1),this.newArticle=!1,this.newService.setModalActive(!1),this.articleForm.reset(),this.modifyArticle&&(this.modifyArticle=!1)}onFileChange(c){let o=c.target.files[0];this.articleForm.patchValue({image:o}),this.articleForm.get("image").updateValueAndValidity(),c.target.value=""}getOneNews(c){if(c){let o=O.apiUrlBase;this.newService.getnews(this.newsId).subscribe({next:s=>{this.news=s,this.images=o+s?.data.image?.replace("public","storage")},error:s=>{console.log(s),this.errorNews=s.message.message},complete:()=>{console.log("complete")}})}}modifyNews(){this.modifyArticle=!0,this.modifyArticle=!0}deleteOneNews(c){confirm("\xBFEstas seguro de eliminar esta noticia?")&&this.newService.deleteNews(c).subscribe({next:s=>{s.error===!1&&(alert(s.message),this.getOneNews(this.activeGet)),this.closeModal()},error:s=>{console.log(s)},complete:()=>{console.log("complete")}})}openModalNewsModify(){this.openModalModify=!0}closeModalNews(c){this.openModalModify=c,this.getOneNews(this.activeGet)}newArticleOpen(){this.newArticle=!this.newArticle,this.articleForm.setValue({news_id:this.news.data.id?this.news.data.id:"",subtitle:"",entrance:"",body_news:"",image:""})}newArticleClose(){this.newArticle=!this.newArticle,this.articleForm.reset()}newArticleSend(){if(this.articleForm.valid){let c=new FormData;c.append("news_id",this.articleForm.get("news_id")?.value),c.append("subtitle",this.articleForm.get("subtitle")?.value),c.append("entrance",this.articleForm.get("entrance")?.value),c.append("body_news",this.articleForm.get("body_news")?.value),c.append("image",this.articleForm.get("image")?.value),this.newService.createArticle(c).subscribe({next:o=>{this.getOneNews(this.activeGet),this.articleForm.reset(),o.error===!1&&(this.newArticle=!1,alert(o.message))},error:o=>{this.errorsArticle=o.errors},complete:()=>{console.log("complete")}})}else this.messageArticleError="Todos los campos son obligatorios"}deleteOneArticle(c){confirm("\xBFEstas seguro de eliminar este articulo?")&&this.newService.deleteArticle(c).subscribe({next:s=>{this.getOneNews(this.activeGet)},error:s=>{console.log(s)},complete:()=>{console.log("complete")}})}modifyArticleOpen(c){this.modifyArticle=!0,this.idArticle=c}modifyArticleClose(c){this.modifyArticle=c}deleteComment(c){confirm("\xBFEstas seguro de eliminar este comentario?")&&this.newService.deleteComment(c).subscribe({next:s=>{console.log(s),this.getOneNews(this.activeGet)},error:s=>{console.log(s)},complete:()=>{console.log("complete")}})}};a.\u0275fac=function(o){return new(o||a)},a.\u0275cmp=F({type:a,selectors:[["app-detail-news"]],inputs:{newsId:"newsId",activeGet:"activeGet"},outputs:{modalClose:"modalClose"},standalone:!0,features:[T,V],decls:8,vars:1,consts:[[1,"conteiner-news-one"],[1,"conteiner-news-one__close"],[3,"click"],[1,"fa-solid","fa-x"],[1,"dialog",3,"open"],[3,"openModalNews","idNews"],[1,"conteiner-news-one__title"],[3,"title"],[1,"conteiner-news-one__description"],[1,"conteiner-news-one__description--label"],["for","title"],["for","epigraph"],["for","content"],["for","visible"],["for","featured"],[1,"conteiner-news-one__image"],[3,"src","alt"],[1,"conteiner-news-one__btn"],[1,"btn","btn-warning",3,"click","disabled"],[1,"btn","btn-danger",3,"click","disabled"],["enctype","multipart/form-data",1,"conteiner-news-one__form",3,"formGroup"],[3,"idArticle"],[1,"btn","btn-success",3,"click","disabled"],["for","subtitle"],["for","entrance"],[1,"conteiner-news-one__full"],["for","body_news"],["type","menu",1,"btn","btn-warning",3,"click"],[1,"btn","btn-danger",3,"click"],[3,"formModifyClose","idArticle"],["enctype","multipart/form-data",1,"conteiner-news-one__form",3,"submit","formGroup"],[1,"alert","alert-error"],["type","hidden","id","news_id","name","news_id","formControlName","news_id"],["id","subtitle","name","subtitle","type","text","formControlName","subtitle"],["id","entrance","name","entrance","type","text","formControlName","entrance"],["type","text","name","body_news","formControlName","body_news"],["type","file","id","image","name","image","formControlName","image",3,"change"],["type","submit","name","buttonArtile",1,"btn","btn-success",3,"disabled"],["for","comment"],[1,"btn","btn-warning",3,"disabled"],[1,"table-loading"]],template:function(o,s){o&1&&(i(0,"section",0)(1,"div",1)(2,"a",2),p("click",function(){return s.closeModal()}),C(3,"i",3),n()(),x(4,be,57,24)(5,De,2,1),I(6,4,Q,null,5),n()),o&2&&(r(6),k((s.news==null?null:s.news.error)===!1))},dependencies:[J,W],styles:[".conteiner-news-one[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:first baseline;flex-direction:column;overflow-y:scroll}.conteiner-news-one__close[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:flex-end;padding:5px 10px;background:#999}.conteiner-news-one__close[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;justify-content:center;background:#fff;padding:5px;border:1.5px solid #dc3545;color:#dc3545}.conteiner-news-one__close[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#dc3545;color:#fff;cursor:pointer}.conteiner-news-one__title[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center}.conteiner-news-one__form[_ngcontent-%COMP%]{width:100%}.conteiner-news-one__description[_ngcontent-%COMP%]{padding:10px;width:100%;display:grid;grid-template-columns:repeat(2,1fr);grid-gap:.2rem}.conteiner-news-one__description--label[_ngcontent-%COMP%]{min-width:300px;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:10px;border:1px solid #ccc}.conteiner-news-one__description--label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;background:#999;text-align:center;padding:5px;font-size:1.2rem;color:#fff;font-weight:700}.conteiner-news-one__description--label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;padding:5px;font-size:1rem}.conteiner-news-one__description--label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:5px;font-size:1rem;border:none;outline:none}.conteiner-news-one__description--label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:#f0efef}.conteiner-news-one__full[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:10px;border:1px solid #ccc}.conteiner-news-one__full[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;background:#999;text-align:center;padding:5px;font-size:1.2rem;color:#fff;font-weight:700}.conteiner-news-one__full[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;padding:5px;font-size:1rem}.conteiner-news-one__full[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:5px;font-size:1rem;border:none;outline:none;resize:none}.conteiner-news-one__full[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background:#f0efef}.conteiner-news-one__image[_ngcontent-%COMP%]{width:150px}.conteiner-news-one__image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;padding:10px}.conteiner-news-one__btn[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;align-items:center;justify-content:center;gap:10px;padding:10px}.conteiner-news-one[_ngcontent-%COMP%]   .form-articles[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;flex-direction:column}.conteiner-news-one[_ngcontent-%COMP%]   app-form-modify[_ngcontent-%COMP%]{width:100%}.dialog[_ngcontent-%COMP%]{width:100%;height:100%;border:none;box-shadow:none}"]});let t=a;return t})();export{$e as DetailNewsComponent};
