import{a as G}from"./chunk-ESW26QMV.js";import{a as z}from"./chunk-SVQ25E35.js";import{a as P,b as n,c as E,d as A,e as S,g as V,h as N,i as T,m as q,n as L}from"./chunk-CIC5IFOZ.js";import{a as k}from"./chunk-MVUBCH6A.js";import{ya as v}from"./chunk-TGWLULYN.js";import{Ca as m,Ta as f,W as w,Xa as b,_ as C,_a as u,cb as a,db as r,eb as c,fb as F,ga as M,ha as g,ia as y,lb as h,mb as p,pa as x,rb as s,wb as O}from"./chunk-6LMFFRUR.js";function j(i,l){i&1&&(a(0,"p",7),s(1,"El subtitulo es obligatorio"),r())}function D(i,l){i&1&&(a(0,"p",7),s(1,"La entrada es requerida"),r())}function I(i,l){i&1&&(a(0,"p",7),s(1,"El contenido es requerido"),r())}function U(i,l){if(i&1){let t=F();a(0,"form",1),h("submit",function(){g(t);let e=p();return y(e.modifyOneArticle(e.idArticle))}),c(1,"input",2),a(2,"div",3)(3,"div",4)(4,"label",5),s(5,"Subtitulo"),r(),c(6,"input",6),f(7,j,2,0,"p",7),r(),a(8,"div",4)(9,"label",8),s(10,"Entrada"),r(),c(11,"input",9),f(12,D,2,0,"p",7),r()(),a(13,"div",10)(14,"label",11),s(15,"Contenido"),r(),c(16,"textarea",12),f(17,I,2,0,"p",7),r(),a(18,"div",13)(19,"input",14),h("change",function(e){g(t);let d=p();return y(d.onFileChangeForm(e))}),r()(),c(20,"div",15),a(21,"div",16)(22,"button",17),s(23,"Modificar"),r(),a(24,"button",18),h("click",function(){g(t);let e=p();return y(e.modifyFomrClose())}),s(25,"Cancelar"),r()()()}if(i&2){let t=p();b("formGroup",t.articleModifyForm),m(7),u(!(t.subtitle==null||t.subtitle.errors==null)&&t.subtitle.errors.required&&(t.subtitle!=null&&t.subtitle.touched)?7:-1),m(5),u(!(t.entrance==null||t.entrance.errors==null)&&t.entrance.errors.required&&(t.entrance!=null&&t.entrance.touched)?12:-1),m(5),u(!(t.body_news==null||t.body_news.errors==null)&&t.body_news.errors.required&&(t.body_news!=null&&t.body_news.touched)?17:-1),m(5),b("disabled",t.articleModifyForm.invalid)}}function B(i,l){i&1&&c(0,"app-loading")}var te=(()=>{let l=class l{constructor(){this.newService=w(k),this.formbuilder=w(q),this.UrlImg=G.apiUrlBase,this.articleModifyForm=new S({}),this.modifyArticle=!1,this.messageArticleError="",this.formModifyClose=new x,this.articleFormModify()}ngOnInit(){}ngOnChanges(o){this.modifyArticleOpen(this.idArticle)}articleFormModify(){this.articleModifyForm=this.formbuilder.group({news_id:["",n.compose([n.required])],subtitle:["",n.compose([n.required,n.maxLength(255),n.minLength(5)])],entrance:["",n.compose([n.required,n.maxLength(1e3),n.minLength(5)])],body_news:["",n.compose([n.required,n.maxLength(1e4),n.minLength(5)])],image:[""]})}get news_id(){return this.articleModifyForm.get("news_id")}get subtitle(){return this.articleModifyForm.get("subtitle")}get entrance(){return this.articleModifyForm.get("entrance")}get body_news(){return this.articleModifyForm.get("body_news")}get image(){return this.articleModifyForm.get("image")}modifyOneArticle(o){if(this.articleModifyForm.valid){let e=new FormData;e.append("news_id",this.articleModifyForm.get("news_id")?.value),e.append("subtitle",this.articleModifyForm.get("subtitle")?.value),e.append("entrance",this.articleModifyForm.get("entrance")?.value),e.append("body_news",this.articleModifyForm.get("body_news")?.value),e.append("image",this.articleModifyForm.get("image")?.value),confirm("\xBFEstas seguro de modificar este articulo?")&&this.newService.modifyArticle(e,o).subscribe({next:_=>{_.error===!1&&(this.modifyArticle=!1,alert(_.message),this.modifyFomrClose())},error:_=>{console.log(_)},complete:()=>{console.log("complete")}})}else this.messageArticleError="Todos los campos son obligatorios"}modifyArticleOpen(o){o&&(this.newService.getArticle(o).subscribe({next:e=>{console.log(e),this.article=e,this.articleFormModify(),this.UrlImg=this.UrlImg+this.article?.data?.image?.replace("public","storage")},error:e=>{console.log(e)},complete:()=>{console.log("complete")}}),setTimeout(()=>{this.articleModifyForm.setValue({news_id:this.article?.data?.news_id?this.article?.data?.news_id:"",subtitle:this.article?.data?.subtitle?this.article?.data?.subtitle:"",entrance:this.article?.data?.entrance?this.article?.data?.entrance:"",body_news:this.article?.data?.body_news?this.article?.data?.body_news:"",image:""})},500))}modifyFomrClose(){this.modifyArticle=!1,this.articleModifyForm.reset(),this.formModifyClose.emit(this.modifyArticle)}onFileChangeForm(o){let e=o.target.files[0];this.articleModifyForm.patchValue({image:e}),this.articleModifyForm.get("image").updateValueAndValidity(),o.target.value=""}};l.\u0275fac=function(e){return new(e||l)},l.\u0275cmp=C({type:l,selectors:[["app-form-modify"]],inputs:{idArticle:"idArticle"},outputs:{formModifyClose:"formModifyClose"},standalone:!0,features:[M,O],decls:2,vars:1,consts:[["enctype","multipart/form-data",1,"form-articles",3,"formGroup"],["enctype","multipart/form-data",1,"form-articles",3,"submit","formGroup"],["type","hidden","id","news_id","name","news_id","formControlName","news_id"],[1,"conteiner-news-one__description"],[1,"conteiner-news-one__description--label"],["for","subtitle"],["type","text","id","subtitle","name","subtitle","formControlName","subtitle"],[1,"alert","alert-error"],["for","entrance"],["type","text","id","entrance","name","entrance","formControlName","entrance"],[1,"conteiner-news-one__full"],["for","body_news"],["type","text","id","body_news","name","body_news","formControlName","body_news"],["for","image",1,"conteiner-news-one__description--label"],["type","file","id","image","name","image","formControlName","image",3,"change"],[1,"conteiner-news-one__image"],[1,"conteiner-news-one__btn"],["name","modify-article","type","submit",1,"btn","btn-success",3,"disabled"],[1,"btn","btn-danger",3,"click"]],template:function(e,d){e&1&&f(0,U,26,5,"form",0)(1,B,1,0,"app-loading"),e&2&&u((d.article==null?null:d.article.error)===!1?0:1)},dependencies:[L,V,P,E,A,N,T,v,z],styles:[".conteiner-news-one__form[_ngcontent-%COMP%]{width:100%}.conteiner-news-one__description[_ngcontent-%COMP%]{padding:10px;width:100%;display:grid;grid-template-columns:repeat(2,1fr);grid-gap:.2rem}.conteiner-news-one__description--label[_ngcontent-%COMP%]{min-width:300px;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:10px;border:1px solid #ccc}.conteiner-news-one__description--label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;background:#999;text-align:center;padding:5px;font-size:1.2rem;color:#fff;font-weight:700}.conteiner-news-one__description--label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;padding:5px;font-size:1rem}.conteiner-news-one__description--label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:5px;font-size:1rem;border:none;outline:none}.conteiner-news-one__description--label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:#f0efef}.conteiner-news-one__full[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:10px;border:1px solid #ccc}.conteiner-news-one__full[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;background:#999;text-align:center;padding:5px;font-size:1.2rem;color:#fff;font-weight:700}.conteiner-news-one__full[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;padding:5px;font-size:1rem}.conteiner-news-one__full[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:5px;font-size:1rem;border:none;outline:none;resize:none}.conteiner-news-one__full[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background:#f0efef}.conteiner-news-one__image[_ngcontent-%COMP%]{width:150px}.conteiner-news-one__image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;padding:10px}.conteiner-news-one__btn[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;align-items:center;justify-content:center;gap:10px;padding:10px}.conteiner-news-one[_ngcontent-%COMP%]   .form-articles[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;flex-direction:column}"]});let i=l;return i})();export{te as a};
