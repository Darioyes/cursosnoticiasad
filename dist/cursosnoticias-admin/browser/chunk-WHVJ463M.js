import{a as k}from"./chunk-MYHRJA7T.js";import{d as x}from"./chunk-6QAIJRBG.js";import{a as E,b as c,c as y,d as M,e as O,f as v,g as S,h as F,i as L,m as T,n as B}from"./chunk-CIC5IFOZ.js";import"./chunk-QZUWT2GO.js";import"./chunk-IXWLID5M.js";import"./chunk-TGWLULYN.js";import{Ca as r,Ta as p,W as f,Xa as C,_,_a as m,cb as o,db as i,eb as d,lb as P,mb as u,na as w,rb as a,sb as h,wb as b}from"./chunk-6LMFFRUR.js";var D=(()=>{let t=class t{};t.\u0275fac=function(g){return new(g||t)},t.\u0275cmp=_({type:t,selectors:[["app-loading-button"]],standalone:!0,features:[b],decls:1,vars:0,consts:[[1,"loader-button"]],template:function(g,n){g&1&&d(0,"div",0)},styles:['.loader-button[_ngcontent-%COMP%]{width:30px;aspect-ratio:1;display:grid;-webkit-mask:conic-gradient(from 15deg,rgba(0,0,0,0),#000);animation:_ngcontent-%COMP%_l26 1s infinite steps(12)}.loader-button[_ngcontent-%COMP%], .loader-button[_ngcontent-%COMP%]:before, .loader-button[_ngcontent-%COMP%]:after{background:radial-gradient(closest-side at 50% 12.5%,#f03355 96%,#0000) 50% 0/20% 80% repeat-y,radial-gradient(closest-side at 12.5% 50%,#f03355 96%,#0000) 0 50%/80% 20% repeat-x}.loader-button[_ngcontent-%COMP%]:before, .loader-button[_ngcontent-%COMP%]:after{content:"";grid-area:1/1;transform:rotate(30deg)}.loader-button[_ngcontent-%COMP%]:after{transform:rotate(60deg)}@keyframes _ngcontent-%COMP%_l26{to{transform:rotate(1turn)}}']});let e=t;return e})();function N(e,t){e&1&&(o(0,"p",3),a(1,"Todos los campos son obligatorios"),i())}function j(e,t){if(e&1&&(o(0,"p",6),a(1),i()),e&2){let l=u();r(),h(l.loginErrors==null?null:l.loginErrors.message)}}function G(e,t){e&1&&(o(0,"p",3),a(1,"El email es obligatorio"),i())}function q(e,t){e&1&&(o(0,"p",3),a(1,"Debe ser un email valido"),i())}function R(e,t){if(e&1&&(o(0,"p",3),a(1),i()),e&2){let l=u();r(),h(l.loginErrors==null||l.loginErrors.errors==null?null:l.loginErrors.errors.email)}}function V(e,t){e&1&&(o(0,"p",3),a(1,"El password es obligatorio"),i())}function z(e,t){if(e&1&&(o(0,"p",3),a(1),i()),e&2){let l=u();r(),h(l.loginErrors.errors.password)}}function A(e,t){if(e&1&&(o(0,"button",12),a(1,"Ingresar"),i()),e&2){let l=u();C("disabled",l.loginForm.invalid)}}function U(e,t){if(e&1&&(o(0,"button",12),d(1,"app-loading-button"),i()),e&2){let l=u();C("disabled",l.loginForm.invalid)}}var ee=(()=>{let t=class t{constructor(){this.loginForm=new O({email:new v(""),password:new v("")}),this.formbuilder=f(T),this.loginService=f(k),this.router=f(x),this.destroyRef=f(w),this.valid=!1,this.loginErrors={},this.errorslogin=!1,this.loadingButton=!1}ngOnInit(){this.loginForm=this.formbuilder.group({email:["",c.compose([c.required,c.email])],password:["",c.compose([c.required])]})}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}loginUser(){this.loginForm.valid?(this.loadingButton=!this.loadingButton,this.loginService.login(this.loginForm.value).subscribe({next:s=>{sessionStorage.setItem("token",s.noti_token),sessionStorage.setItem("name",s.data.name),sessionStorage.setItem("success",s.response),this.router.navigate(["/home"]),this.loginForm.reset()},error:s=>{this.loginErrors=s.message,this.errorslogin=!this.errorslogin,this.loadingButton=!this.loadingButton},complete:()=>{console.log("complete"),this.loadingButton=!this.loadingButton}})):this.valid=!this.valid}};t.\u0275fac=function(g){return new(g||t)},t.\u0275cmp=_({type:t,selectors:[["app-login-page"]],standalone:!0,features:[b],decls:22,vars:9,consts:[[1,"main-login"],[1,"main-login__conteiner-login",3,"formGroup"],[1,"form-login",3,"submit"],[1,"alert","alert-error"],["src","../../../../assets/images/logo.jpg","alt","LogoNotiWeb",1,"form-login__logo"],[1,"form-login__input"],[1,"alert","alert-error","form-login__input--error"],["for","email",1,"form-login__input--label"],["formControlName","email","type","email","name","email","id","email","value","","autocomplete","username",1,"form-login__input--field"],["for","password",1,"form-login__input--label"],["formControlName","password","type","password","name","password","id","password","value","","autocomplete","current-password",1,"form-login__input--field"],[1,"form-login__button"],["type","submit","name","button",1,"btn","form-login__input--button",3,"disabled"]],template:function(g,n){g&1&&(o(0,"main",0)(1,"div",1)(2,"form",2),P("submit",function(){return n.loginUser()}),p(3,N,2,0,"p",3),d(4,"img",4),o(5,"div",5),p(6,j,2,1,"p",6),o(7,"label",7),a(8,"Email: "),i(),d(9,"input",8),p(10,G,2,0,"p",3)(11,q,2,0,"p",3)(12,R,2,1,"p",3),i(),o(13,"div",5)(14,"label",9),a(15,"Password: "),i(),d(16,"input",10),p(17,V,2,0,"p",3)(18,z,2,1,"p",3),i(),o(19,"div",11),p(20,A,2,1,"button",12)(21,U,2,1,"button",12),i()()()()),g&2&&(r(),C("formGroup",n.loginForm),r(2),m(n.valid?3:-1),r(3),m((n.loginErrors==null?null:n.loginErrors.response)=="error"?6:-1),r(4),m(!(n.email==null||n.email.errors==null)&&n.email.errors.required&&(n.email!=null&&n.email.touched)?10:-1),r(),m(!(n.email==null||n.email.errors==null)&&n.email.errors.email?11:-1),r(),m(!(n.loginErrors==null||n.loginErrors.errors==null)&&n.loginErrors.errors.email?12:-1),r(5),m(!(n.password==null||n.password.errors==null)&&n.password.errors.required&&(n.password!=null&&n.password.touched)?17:-1),r(),m(!(n.loginErrors==null||n.loginErrors.errors==null)&&n.loginErrors.errors.password?18:-1),r(2),m(n.loadingButton?21:20))},dependencies:[B,S,E,y,M,F,L,D],styles:[".main-login[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;width:100vw;background-color:#f5f5f5}.main-login__conteiner-login[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:50vh;width:30vw;background-color:#fff;border-radius:10px;box-shadow:0 0 10px #000000bf}.main-login__conteiner-login[_ngcontent-%COMP%]   .form-login[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-evenly;align-items:center}.main-login__conteiner-login[_ngcontent-%COMP%]   .form-login__logo[_ngcontent-%COMP%]{width:250px}.main-login__conteiner-login[_ngcontent-%COMP%]   .form-login__input[_ngcontent-%COMP%]{width:70%;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;gap:.5rem}.main-login__conteiner-login[_ngcontent-%COMP%]   .form-login__input--error[_ngcontent-%COMP%]{width:100%;text-align:center}.main-login__conteiner-login[_ngcontent-%COMP%]   .form-login__input--label[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;letter-spacing:3px;font-weight:900}.main-login__conteiner-login[_ngcontent-%COMP%]   .form-login__input--field[_ngcontent-%COMP%]{width:100%;height:40px;border:none;border-bottom:1px solid #000000;outline:none;font-size:.8rem;font-weight:600}.main-login__conteiner-login[_ngcontent-%COMP%]   .form-login__input--button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;align-content:center}"]});let e=t;return e})();export{ee as LoginPageComponent};
